---
title: 设计模式-简单工厂模式
date: 2017-01-16 12:50:40
tags: 大话设计模式
---

# 设计模式
一个简单的计算器代码,通过封装,继承,多态实现界面和逻辑的分离.
<!-- more -->
新手都会写的代码:
``` java

    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);
        System.out.println("请输入第一个数");
        String numberOne = scanner.next();
        System.out.println("请输入运算符号(+,-,*,/)");
        String operator = scanner.next();
        System.out.println("请输入第二个数");
        String numberTwo = scanner.next();

        String result = "";
        if(operator.equals("+")){
            result = String.valueOf(Integer.valueOf(numberOne)+Integer.valueOf(numberTwo));
        }
        if(operator.equals("-")){
            result = String.valueOf(Integer.valueOf(numberOne)-Integer.valueOf(numberTwo));
        }
        if(operator.equals("*")){
            result = String.valueOf(Integer.valueOf(numberOne)*Integer.valueOf(numberTwo));
        }
        if(operator.equals("/")){
            result = String.valueOf(Integer.valueOf(numberOne)/Integer.valueOf(numberTwo));
        }

        System.out.println("运算结果为:"+result);

    }

```

代码很简单,但是有很多比较低级的错误.

1. 一共写了4个if  也就是时候 计算机在这里做了3次多余的判断
2. 没有对除数进行判断,如果输入0程序会奔溃

改进后的代码如下

``` java


    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);
        System.out.println("请输入第一个数");
        String numberOne = scanner.next();
        System.out.println("请输入运算符号(+,-,*,/)");
        String operator = scanner.next();
        System.out.println("请输入第二个数");
        String numberTwo = scanner.next();

        String result = "";

        switch (operator){
            case "+":
                result = String.valueOf(Integer.valueOf(numberOne)+Integer.valueOf(numberTwo));
                break;
            case "-":
                result = String.valueOf(Integer.valueOf(numberOne)-Integer.valueOf(numberTwo));
                break;
            case "*":
                result = String.valueOf(Integer.valueOf(numberOne)*Integer.valueOf(numberTwo));
                break;
            case "/":
                if(numberTwo.equals("0")){
                    System.out.println("除数不能为0");
                }else{
                    result = String.valueOf(Integer.valueOf(numberOne)/Integer.valueOf(numberTwo));
                }
                break;
        }

        System.out.println("运算结果为:"+result);

    }
```

将if换成了switch,减少了判断次数,又在进行除法运算的时候,对除数进行判断,反正程序出错,但是这里跟面向对象编程中的,封装,继承和多态毫无关系,下面就使用这三个属性 对计算机小程序进行优化,增加代码的可维护性,和代码的可扩展性.

使用简单的封装,对代码进行优化

``` java

//首先声明Operation类,将运算过程封装在getResult方法中
public class Operation {

    public static double getResult(double numberOne,double numberTwo,String operate){
        double result = 0;

        switch (operate){
            case "+":
                result = numberOne + numberTwo;
                break;
            case "-":
                result = numberOne - numberTwo;
                break;
            case "*":
                result = numberOne * numberTwo;
                break;
            case "/":
                result = numberOne / numberTwo;
                break;

        }
        return  result;
    }


}

public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);
        System.out.println("请输入第一个数");
        String numberOne = scanner.next();
        System.out.println("请输入运算符号(+,-,*,/)");
        String operator = scanner.next();
        System.out.println("请输入第二个数");
        String numberTwo = scanner.next();

        String result = "";

        //调用上面的封装
        result = String.valueOf(Operation.getResult(Double.valueOf(numberOne),Double.valueOf(numberTwo),operator));

        System.out.println("运算结果为:"+result);

}


```

上面通过将运算过程封装在getResult方法中,这样实现了业务的封装,比如现在要在多个地方上实现同一个功能,这时就可以将功能封装起来,供多个地方调用,既可以节省代码,也可方便后面出现错误,集中修改代码.
上面只是使用了面向对象中的一个特性(封装,继承,多态),下面就把这3个特性都用到这个简单的计算机程序中:

``` java

public class Operation {

    private double numberOne;

    private double numberTwo;

    public double getResult(){
        double result = 0;
        return result;
    }

    public double getNumberOne() {
        return numberOne;
    }

    public void setNumberOne(double numberOne) {
        this.numberOne = numberOne;
    }

    public double getNumberTwo() {
        return numberTwo;
    }

    public void setNumberTwo(double numberTwo) {
        this.numberTwo = numberTwo;
    }
}


public class OperationAdd extends Operation{

    @Override
    public double getResult() {
        return getNumberOne() + getNumberTwo();
    }
}

public class OperationSub extends Operation {

    @Override
    public double getResult() {
        return getNumberOne() - getNumberTwo();
    }
}

public class OperationMul extends Operation {

    @Override
    public double getResult() {
        return getNumberOne() * getNumberTwo();
    }
}

public class OperationDiv extends Operation{

    @Override
    public double getResult() {
        if(getNumberTwo()==0){
            System.out.println("除数不能为0");
            return 0;
        }

        return getNumberOne() / getNumberTwo();
    }
}

public class OperationFactory {

    public static Operation createOperation(String operate){
        Operation operation = null;
        switch (operate){
            case "+":
                operation = new OperationAdd();
                break;
            case "-":
                operation = new OperationSub();
                break;
            case "*":
                operation = new OperationMul();
                break;
            case "/":
                operation = new OperationDiv();
                break;
        }
        return operation;
    }

}

```

首先通过封装加公共的属性写成基类,在计算器小程序中公共的属性就是 第一个数和第二个数,公共的方法就是计算过程,这里使用一个默认实现的方法,让每个只类去实现自己的运算过程,如:OperationAdd中只用重写getResult方法,让后将2个数相加,这就实现了加法的逻辑,最后创建OperationFactory类,这个类型就是工厂类,**通过不同的类型去创建不同的对象,具体创建过程封装在内部,调用的时候,只需要告诉工厂你需要的是什么类型的对象**.这就是简单工厂设计模式.